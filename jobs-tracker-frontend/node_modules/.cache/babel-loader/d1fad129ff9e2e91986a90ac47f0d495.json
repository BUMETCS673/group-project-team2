{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nimport { useAuth0 } from '@auth0/auth0-react';\nconst {\n  getAccessTokenSilently\n} = useAuth0();\n\nconst getClaims = async () => {\n  const claims = await getAccessTokenSilently();\n  return claims;\n};\n\nlet accessToken;\ngetClaims().then(res => accessToken = res);\nexport const apiSlice = createApi({\n  reducerPath: 'api',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'https://x3pmfzyrll.execute-api.us-east-1.amazonaws.com/default/cs673_job',\n\n    prepareHeaders(headers) {\n      headers.set('x-api-key', accessToken);\n      return headers;\n    }\n\n  }),\n\n  endpoints(builder) {\n    return {\n      fetchJobs: builder.query({\n        query() {\n          let limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n          return `/jobs?limit=${limit}`;\n        }\n\n      })\n    };\n  }\n\n});\nexport const {\n  useFetchJobsQuery\n} = apiSlice;","map":{"version":3,"names":["createApi","fetchBaseQuery","useAuth0","getAccessTokenSilently","getClaims","claims","accessToken","then","res","apiSlice","reducerPath","baseQuery","baseUrl","prepareHeaders","headers","set","endpoints","builder","fetchJobs","query","limit","useFetchJobsQuery"],"sources":["/Users/tainaconde/Desktop/BU/CS673/group-project-team2/jobs-tracker-frontend/src/features/jobs/jobs-api-slice.ts"],"sourcesContent":["import { createApi, fetchBaseQuery} from '@reduxjs/toolkit/query/react'\nimport { useAuth0 } from '@auth0/auth0-react'\n\nconst { getAccessTokenSilently } = useAuth0()\nconst getClaims = async () => {\n    const claims = await getAccessTokenSilently()\n    return claims\n}\nlet accessToken:string;\ngetClaims().then(res => (accessToken = res))\n\ninterface Job {\n    id: string,\n    userId: string,\n    companyName : string,\n    jobTitle: string,\n    description: string,\n    status: string,\n    link: string,\n    createdAt: Date,\n    updatedAt: Date, \n}\n\nexport const apiSlice = createApi({\n    reducerPath: 'api',\n    baseQuery: fetchBaseQuery({\n        baseUrl: 'https://x3pmfzyrll.execute-api.us-east-1.amazonaws.com/default/cs673_job',\n        prepareHeaders(headers) {\n            headers.set('x-api-key', accessToken )\n            return headers\n        }\n    }),\n    endpoints(builder) {\n        return {\n            fetchJobs: builder.query<Job[], number|void>({\n                query(limit = 10) {\n                    return `/jobs?limit=${limit}`\n                }\n            }) \n        }\n    }\n})\n\nexport const {useFetchJobsQuery} = apiSlice\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,cAApB,QAAyC,8BAAzC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,MAAM;EAAEC;AAAF,IAA6BD,QAAQ,EAA3C;;AACA,MAAME,SAAS,GAAG,YAAY;EAC1B,MAAMC,MAAM,GAAG,MAAMF,sBAAsB,EAA3C;EACA,OAAOE,MAAP;AACH,CAHD;;AAIA,IAAIC,WAAJ;AACAF,SAAS,GAAGG,IAAZ,CAAiBC,GAAG,IAAKF,WAAW,GAAGE,GAAvC;AAcA,OAAO,MAAMC,QAAQ,GAAGT,SAAS,CAAC;EAC9BU,WAAW,EAAE,KADiB;EAE9BC,SAAS,EAAEV,cAAc,CAAC;IACtBW,OAAO,EAAE,0EADa;;IAEtBC,cAAc,CAACC,OAAD,EAAU;MACpBA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBT,WAAzB;MACA,OAAOQ,OAAP;IACH;;EALqB,CAAD,CAFK;;EAS9BE,SAAS,CAACC,OAAD,EAAU;IACf,OAAO;MACHC,SAAS,EAAED,OAAO,CAACE,KAAR,CAAkC;QACzCA,KAAK,GAAa;UAAA,IAAZC,KAAY,uEAAJ,EAAI;UACd,OAAQ,eAAcA,KAAM,EAA5B;QACH;;MAHwC,CAAlC;IADR,CAAP;EAOH;;AAjB6B,CAAD,CAA1B;AAoBP,OAAO,MAAM;EAACC;AAAD,IAAsBZ,QAA5B"},"metadata":{},"sourceType":"module"}